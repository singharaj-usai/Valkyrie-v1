<style>
    #user-submenu {
        position: fixed;
        left: 0;
        right: 0;
        z-index: 1029;
        border-top: none;
        border-radius: 0;
        margin-bottom: 0;
        border-bottom: 1px solid #e7e7e7;
    }

    #user-submenu .navbar-nav {
        float: none;
    }

    #user-submenu .navbar-nav > li {
        float: none;
        display: inline-block;
    }

    #user-submenu .navbar-nav > li > a {
        padding-top: 15px;
    }

    :root {
    --user-submenu-top: 50px;
}

#user-submenu {
    top: var(--user-submenu-top);
}

    body {
        padding-top: 100px;
    }

    .navbar-fixed-top + .navbar-fixed-top {
        top: auto;
    }

    @media (max-width: 767px) {
        #user-submenu {
            display: none !important;
        }

        body {
            padding-top: 50px;
        }
    }

    #site-wide-announcement {
  position: fixed;
  left: 0;
  right: 0;
  z-index: 999;
  transition: top 0.3s ease;
}



@media (max-width: 767px) {
  #site-wide-announcement {
    top: 50px;
  }
  body {
    padding-top: 100px;
  }
}
</style>

<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Valkyrie</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="/games">Games</a></li>
                <li><a href="/catalog">Catalog</a></li>
                <li><a href="/forum/home">Forum</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"> More <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="/users"><i class="bi bi-people"></i> Users</a></li>
                        <li><a href="#"><i class="bi bi-question-circle"></i> FAQ</a></li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="bi bi-list"></i> Others</a></li>
                    </ul>
                </li>
                
                <!-- User submenu items for mobile -->
                <li class="visible-xs"><a href="/"><i class="bi bi-house-door"></i> Home</a></li>
                <li class="visible-xs"><a href="/user-profile"><i class="bi bi-person"></i> Profile</a></li>
                <li class="visible-xs"><a href="#"><i class="fa fa-shirt"></i> Avatar</a></li>
                <li class="visible-xs"><a href="/my/friends"><i class="bi bi-people"></i> Friends</a></li>
                <li class="visible-xs"><a href="/my/messages"><i class="bi bi-envelope"></i> Messages</a></li>
                <li class="visible-xs"><a href="/my/create"><i class="bi bi-tools"></i> Create</a></li>
            </ul>
           
            <div class="nav navbar-nav navbar-right">
                <div id="auth-container">
                    <!-- This will be dynamically populated -->
                </div>
            </div>
        </div>
    </div>
</nav>
<nav id="user-submenu" class="navbar navbar-inverse navbar-fixed-top hidden-xs">
    <div class="container">
        <ul class="nav navbar-nav">
            <li><a href="/"><i class="bi bi-house-door"></i> Home</a></li>
            <li><a href="/user-profile" id="profile-link"><i class="bi bi-person"></i> Profile</a></li>
            <li><a href="#"><i class="fa fa-shirt"></i> Avatar</a></li>
            <li><a href="/my/friends"><i class="bi bi-people"></i> Friends</a></li>
            <li><a href="/my/messages"><i class="bi bi-envelope"></i> Messages</a></li>
            <li><a href="/my/create"><i class="bi bi-tools"></i> Create</a></li>
        </ul>
    </div>
</nav>

<!-- <div id="site-wide-announcement" class="alert alert-warning text-center" style="margin-bottom: 0;">
    <div class="container">
        <span>Welcome to Valkyrie! Please know this is a work in progress and I have a lot of work to do. Consider this a beta version of the site.</span>
    </div>
</div>

<script>
    function updateAnnouncementPosition() {
        const userSubmenu = document.getElementById('user-submenu');
        const announcement = document.getElementById('site-wide-announcement');
        const mainNavbar = document.querySelector('.navbar-fixed-top');

        // Get the heights of the navbars
        const mainNavbarHeight = mainNavbar ? mainNavbar.offsetHeight : 0;
        const userSubmenuHeight = (userSubmenu && window.getComputedStyle(userSubmenu).display !== 'none') ? userSubmenu.offsetHeight : 0;

        // Calculate the total top offset
        const totalTop = mainNavbarHeight + userSubmenuHeight;

        // Apply the calculated top to the announcement
        announcement.style.top = `${totalTop}px`;

        // Adjust body padding
        document.body.style.paddingTop = `${totalTop + announcement.offsetHeight}px`;
    }

    window.addEventListener('resize', updateAnnouncementPosition);
    document.addEventListener('DOMContentLoaded', updateAnnouncementPosition);
</script> -->

<script>
  function updateSubmenuPosition() {
    const mainNavbar = document.querySelector('.navbar-default');
    const userSubmenu = document.getElementById('user-submenu');
    if (mainNavbar && userSubmenu) {
        const mainNavbarHeight = mainNavbar.offsetHeight;
        const submenuTop = getComputedStyle(document.documentElement).getPropertyValue('--user-submenu-top').trim();
        
        userSubmenu.style.top = `calc(${submenuTop} + ${mainNavbarHeight - parseInt(submenuTop)}px)`;
        document.body.style.paddingTop = (mainNavbarHeight + userSubmenu.offsetHeight) + 'px';
    }
}
window.addEventListener('resize', updateSubmenuPosition);
document.addEventListener('DOMContentLoaded', updateSubmenuPosition);
</script>

<script src="/js/theme-loader.js"></script>